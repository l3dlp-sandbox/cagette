<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="::LANG::" style="font-size:16px">
	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" xml:lang="::LANG::" lang="::LANG::" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Espace Producteur</title>

		$$favicons()

		$$googleTagManager(::getVariable("googleTagManagerId")::)

		<!-- Cagette CSS -->
		::if(DEBUG)::
			<link rel="stylesheet" type="text/css" href="/theme/::theme.id::/css/::getVariable('css')::/style.css" />
		::else::
			<link rel="stylesheet" type="text/css" href="/theme/::theme.id::/css/::getVariable('css')::/style.min.css" />
		::end::

		<!-- Cagette very own icon font -->
		<link rel="stylesheet" href="/font/icons.css?v=::getVariable('css')::" />
			
		<!-- BOOTSTRAP 	-->
		<link rel="stylesheet" href="/theme/::theme.id::/css/::getVariable('css')::/bootstrap.min.css" />
	
	::if(DEBUG)::
    <script type="text/javascript" src="/js/::getVariable('js')::/libs.dev.js"></script>
    ::else::
    <script type="text/javascript" src="/js/::getVariable('js')::/libs.prod.js"></script>
    ::end::
	</head>

	::if bgcolor==null:: ::set bgcolor="#bad096":: ::end::
	::if container==null:: ::set container="container":: ::end::
	<body class="::container:: cpro" style="background-url:none;background: ::raw bgcolor::">
		
		::if DEBUG::
		<div style="position: absolute;background: #666;padding: 8px;left: 0;color: #FF0;">DEBUG</div>
		::end::
		
		<!-- Modal window -->
		<div id="myModal" />
		
		<div style="display: flex;">
			<style>
				.nav-placeholder {
					min-width: 240px;
				}
				@media (max-width: 900px){
					.nav-placeholder {
						min-width: 65px;
					}
				}
				@media (max-width: 600px){
					.nav-md {
						display: none;
					}
					#cavea-footer {
						margin-bottom: 40px;
					}
				}
			</style>

			<div class="nav-placeholder">
				<div class="nav-placeholder nav-md" style="background-color: white; position: absolute; top: 0; bottom: 0; left: 0; border-right: 1px solid rgba(0, 0, 0, 0.12);"/>
				<div id='navigation-neo-container' />
			</div>

			<div style="flex-grow: 1;">
				<div style="min-height: 64px;">
					<div class="header-placeholder" style="position: absolute; top: 0; right: 0; left: 0;"/>
					<div id='header-neo-container'/>
				</div>
				::raw __content__::
			</div>

			<script language="javascript">
				window.addEventListener("DOMContentLoaded", function() {
					::set group = getCurrentGroup()::
					::if(user!=null)::
						neo.createNeoModule("header-neo-container", "pageHeader", {
							groupName: ::if(group!=null):: "::group.name::" ::else:: null ::end::,
							userName: "::user.getName()::",
							isSuperAdmin: ::isAdmin::
						});
					::else::
						neo.createNeoModule("header-neo-container", "pageHeader", {
							groupName: ::if(group!=null):: "::group.name::" ::else:: null ::end::,
						});
					::end::

					neo.createNeoModule("navigation-neo-container", "navigation", {
						groupName: ::if(group!=null):: "::group.name::" ::else:: null ::end::,
						vendors: [
							::foreach cpro cagettePros::
							{
								id: ::cpro._vendor.id::,
								name: "::cpro._vendor.name::"
							},
							::end::
							]
					});
				});
			</script>
		</div>
		
		$$googleTagManagerNoScript(::getVariable("googleTagManagerId")::)
		  
		<script type="text/javascript">
			window._Cagette = {
			theme: {
				id: "::theme.id::",
				name: "::theme.name::",
				supportEmail: "::theme.supportEmail::"
			}
		}	
		</script>

		::foreach script getNeoModuleScripts()::
			<script src="::script::"></script>
		::end::
		
	</body>
</html>
